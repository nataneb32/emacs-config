(in-package #:people-marketing-api.marketing)

(defun register-new-lead (&key name email phone)
  (let ((new-lead (make-instance 'lead :name name :email email :phone phone)))
    (mito:insert-dao new-lead)))

(defun search-lead (&key name)
  (mito:select-dao 'lead (sxql:where (:like :name (format nil "%~a%" name)))))
